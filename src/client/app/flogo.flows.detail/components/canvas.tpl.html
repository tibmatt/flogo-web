<div *ngIf="!_mockLoading" [ngClass]="{'flogo-canvas-maximum': isOnDefaultRoute()}">
  <div class="canvas-flow">
    <section class="flogo-flow-detail">
      <header class="flogo-flow-detail-header col-sm-10">
        <h3 class="flogo-flow-detail-name" [(myContenteditable)]="_flow.name" (myContenteditableChange)="changeFlowDetail($event, 'name')"></h3>
        <p class="flogo-flow-detail-description" [(myContenteditable)]="_flow.description" placeholder="Add flow's description" (myContenteditableChange)="changeFlowDetail($event, 'descrption')"></p>
      </header>
      <div class="col-sm-2">
        <div class="flogo-flow-detail-menu">
          <div class="flogo-flow-detail-menu-list-wrapper">
            <ul class="flogo-flow-detail-menu-list">
              <li class="flogo-flow-detail-menu-item"><i class="fa fa-pencil fa-fw"></i>
                <a [href]="downloadLink" download>Build</a>
                <ul class="flogo-flow-detail-menu-item-choices">
                  <li class="flogo-flow-detail-menu-item-choice"><a [href]="downloadLink+'?os=linux&arch=386'"><label class="flogo-flow-detail-menu-item-choice-text"><!--<input type="checkbox" disabled/>--><span>x86/Linux</span></label></a></li>
                  <li class="flogo-flow-detail-menu-item-choice"><a [href]="downloadLink+'?os=linux&arch=arm'"><label class="flogo-flow-detail-menu-item-choice-text"><!--<input type="checkbox" disabled/>--><span>ARM/Linux</span></label></a></li>
                  <li class="flogo-flow-detail-menu-item-choice"><a [href]="downloadLink+'?os=darwin&arch=amd64'"><label class="flogo-flow-detail-menu-item-choice-text"><!--<input type="checkbox" checked="checked"/>--><span>Darwin/OSX</span></label></a></li>
                </ul>
              </li>
              <li class="flogo-flow-detail-menu-item"><i class="fa fa-clone fa-fw"></i><a disabled href="javascript:void(0);">Make a copy</a></li>
              <li class="flogo-flow-detail-menu-item"><a [jsonDownloader]="exportFlow()"><i class="fa fa-cloud-download fa-fw"></i>Export for CLI</a></li>
              <li class="flogo-flow-detail-menu-item"><a [href]="exportLink" download><i class="fa fa-cloud-download fa-fw"></i>Export for web UI</a></li>
              <li class="flogo-flow-detail-menu-item"><i class="fa fa-trash fa-fw"></i><a href="javascript:void(0);">Delete</a></li>
            </ul>
          </div>
        </div>
      </div>
    </section>
    <!--<flogo-canvas-flow id="211"></flogo-canvas-flow>-->
    <flogo-canvas-flow-diagram [tasks]="tasks" [diagram]="diagram"></flogo-canvas-flow-diagram>

    <flogo-transform></flogo-transform>

    <!-- the mock section below should be removed later-->
    <section class="container-fluid" style="display: none; width: 100%;">
      <section class="row">
        <header>
          <h3>Mock Area in Canvas component</h3>
          <button type="button" class="btn btn-default" (click)="MOCK=!MOCK">Display</button>
        </header>
      </section>

      <section class="row" [hidden]="!MOCK">
        <div class="col-xs-12">
          <header><h4>Actions</h4></header>
        </div>

        <div class="col-xs-12">
          <button type="button" class="btn btn-warning" (click)="uploadProcess()"
                  [disabled]="_uploadingProcess">Upload process
          </button>
          <button type="button" class="btn btn-default" (click)="startAndMonitorProcess()"
                  [disabled]="_startingProcess" [hidden]="!_hasUploadedProcess">Start process
          </button>
          <button type="button" class="btn btn-default" (click)="mockGetSteps()"
                  [disabled]="_mockGettingStepsProcess" [hidden]="!_hasUploadedProcess">Get steps
          </button>
        </div>

      </section>

      <section class="row" [hidden]="!MOCK || !_steps">

        <div class="col-xs-12">
          <header>
            <h4>Steps</h4>
          </header>
        </div>

        <div class="col-xs-12">
          <!-- TODO: replace [innerHTML] with [textContent] https://github.com/angular/angular/issues/8413 -->
          <pre><code [innerHTML]="_steps | json"></code></pre>
        </div>

      </section>

      <section class="row" [hidden]="!MOCK">

        <div class="col-xs-12">
          <header>
            <h4>Process.json</h4>
          </header>
        </div>

        <div class="col-xs-12">
          <!-- TODO: replace [innerHTML] with [textContent] https://github.com/angular/angular/issues/8413 -->
          <pre><code [innerHTML]="_mockProcess | json"></code></pre>
        </div>

      </section>
    </section>
  </div>
  <div class="canvas-right-container">
    <router-outlet></router-outlet>
  </div>
</div>

<div *ngIf="_mockLoading" class="flogo-spin-loading-bg">
  <div class="flogo-spin-loading">
    <div>
      <div></div>
    </div>
    <div>
      <div></div>
    </div>
    <div>
      <div></div>
    </div>
    <div>
      <div></div>
    </div>
    <div>
      <div></div>
    </div>
    <div>
      <div></div>
    </div>
    <div>
      <div></div>
    </div>
    <div>
      <div></div>
    </div>
  </div>
</div>
